{"version":3,"file":"undo-mimic.js","sources":["../node_modules/undo-mimic/logs.js","../node_modules/undo-mimic/initialize.js","../index.js"],"sourcesContent":["// @ts-nocheck\r\nexport function redoLog(storage) {\r\n\r\n\tconsole.clear(); for (let state of storage.undo) console.log(state);\r\n\r\n\tdocument.querySelector('.log__redo').innerHTML = ''; for (let state of storage.redo) {\r\n\r\n\t\tlet logItem = document.createElement('p');\r\n\t\tlogItem.innerText = JSON.stringify(state);\r\n\t\tdocument.querySelector('.log__redo').appendChild(logItem);\r\n\r\n\t}\r\n\t\r\n}","// @ts-nocheck\r\n\r\nimport { redoLog } from \"./logs\";\r\n// var redoLog = (() => { });\r\n\r\nvar editor = document.getElementById('editor') || document.querySelector('textarea'),\t\r\n\tundoStorage = [],\r\n\tredoStorage = [],\r\n\tdebug = false;\r\n\r\nexport default function main(target, dbg) {\r\n\tdebug = dbg;\r\n\teditor = target;\r\n\treturn editor;\r\n}\r\n\r\neditor.addEventListener('keydown', function (event) {\r\n\r\n\t// console.log(event)\r\n\r\n\tinput.selection = {\r\n\t\tstart: event.target.selectionStart,\r\n\t\tend: event.target.selectionEnd,\r\n\t};\r\n\r\n\tif (input.selection_length) {\r\n\t\tinput.lostData = editor.value.slice(\r\n\t\t\tinput.selection.start,\r\n\t\t\tinput.selection.end\r\n\t\t)\r\n\t}\r\n\telse {\r\n\t\tinput.lostData = editor.value.slice(\r\n\t\t\tinput.selection.start - 1,\r\n\t\t\tinput.selection.end + 1\r\n\t\t)\r\n\t}\r\n\r\n});\r\neditor.addEventListener('paste', e => {\r\n\r\n\tinput.data = (window.clipboardData || e.clipboardData).getData('text/plain');\r\n\tinput.data = input.data.replace(/\\r\\n/g, '\\n');\r\n\t// если вызвано из контекстного меню, то выделение надо ловить в контекстном меню\r\n\r\n});\r\neditor.addEventListener('input', event => {\t\t\t// event.inputType && event.data\t\r\n\r\n\t// console.log(event)\r\n\r\n\tif (event.inputType == 'historyUndo') {\r\n\t\tconsole.log(event.inputType);\r\n\t\tevent.preventDefault();\t\t\t\t\t\t// prevent need on keypress\t\t\r\n\t\treturn false;\r\n\t}\r\n\r\n\r\n\tinput.type = event.inputType;\r\n\tif (input.type !== InputActionType.insertFromPaste) input.data = event.data;\r\n\r\n\tif (!input.selection_length) {\r\n\t\tif (input.type == InputActionType.deleteContentBackward) {\r\n\t\t\tinput.selection.start--;\r\n\t\t\tinput.selection.end--;\r\n\t\t\tinput.lostData = input.lostData[0];\r\n\t\t}\r\n\t\telse if (input.type == InputActionType.deleteContentForward) input.lostData = input.lostData[1];\r\n\t\telse if (input.type == InputActionType.insertText || input.type == InputActionType.insertFromPaste) {\r\n\r\n\t\t\tinput.lostData = input.lostData.slice(1, -1);\r\n\t\t}\r\n\t}\r\n\telse {\r\n\r\n\t\t// input.lostData = input.lostData.slice(1, -1); // !\r\n\t\tinput.selection.end = input.selection.start; // + ((input.data || {}).length || 0);\t\t\r\n\r\n\t}\r\n\r\n\t// action apply\r\n\t// InputTypeAction[event.inputType](event);\r\n\tundoStorage.push(Object.assign({}, input)); //  undoStorage.push(JSON.parse(JSON.stringify(input)))\r\n\r\n\t// clear redo action storage\r\n\tif (event.inputType != 'historyUndo') {\r\n\r\n\t\tredoStorage.splice(0, redoStorage.length);\r\n\t\tdebug && redoLog(storage);\r\n\t}\r\n\telse debug && redoLog(storage);\r\n});\r\n\r\n\r\nexport const input = {\r\n\r\n\ttype: null,\t\t// 'insertFromPaste' | 'deleteByCut' | 'insertText' | 'deleteContentBackward' | ...\r\n\tdata: null,\t\t//  inserted char by 'insertText' type\r\n\tlostData: null, //  data been selected on insert\r\n\r\n\tget selection_length() { return this.selection.end - this.selection.start },\r\n\tselection: {\r\n\t\tstart: null,\r\n\t\tend: null\r\n\t},\r\n}\r\n\r\n\r\n\r\nfunction actionApply(doingState, doingType) {\r\n\r\n\tif (Boolean(doingType) !== Boolean('redo')) var lostData = doingState.lostData, data = doingState.data;\r\n\telse {\r\n\t\tvar data = doingState.lostData,\r\n\t\t\tlostData = doingState.data;\r\n\t}\r\n\r\n\tswitch (doingState.type) {\r\n\t\tcase 'insertFromPaste':\r\n\r\n\t\t\teditor.value = (\r\n\t\t\t\teditor.value.substring(0, doingState.selection.start) + lostData +\r\n\t\t\t\teditor.value.substring(doingState.selection.start + data.length)\r\n\t\t\t);\r\n\t\t\teditor.setSelectionRange(doingState.selection.start, doingState.selection.end + lostData.length);\r\n\t\t\tif (doingState.caret) editor.selectionStart = editor.selectionEnd;\r\n\r\n\t\t\tbreak;\r\n\t\tcase 'insertText':\r\n\r\n\t\t\tif (!doingState.selection_length)\r\n\t\t\t\teditor.value = (\r\n\t\t\t\t\teditor.value.substring(0, doingState.selection.start) + (lostData || '') +\r\n\t\t\t\t\teditor.value.substring(doingState.selection.start + (data || '').length)  //  + !doingType\r\n\t\t\t\t);\r\n\r\n\t\t\teditor.setSelectionRange(\r\n\t\t\t\tdoingState.selection.start + lostData.length,\r\n\t\t\t\tdoingState.selection.end + lostData.length\t\t  // + lostData.length * !!doingType\r\n\t\t\t);\r\n\t\t\tbreak;\r\n\t\tcase 'deleteByCut': // either cut approach\r\n\t\tcase 'deleteContentForward': // del on sel.len == 0\r\n\t\tcase 'deleteContentBackward': // all other approaches to del\r\n\t\t\teditor.value = (\r\n\t\t\t\teditor.value.substring(0, doingState.selection.start) + (lostData || '') +\r\n\t\t\t\teditor.value.substring(doingState.selection.end + !!doingType * (data || '').length)\r\n\t\t\t);\r\n\r\n\t\t\teditor.selectionStart = editor.selectionEnd = (\r\n\t\t\t\tdoingState.selection.start +\r\n\t\t\t\t(\r\n\t\t\t\t\tdoingState.type == InputActionType.deleteContentBackward && (lostData || '').length == 1\r\n\t\t\t\t)\r\n\t\t\t);\r\n\r\n\t\t\tif ((lostData || '').length > 1) editor.selectionEnd = doingState.selection.start + lostData.length;\r\n\r\n\t\t\tbreak;\r\n\t}\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport const storeMultiactions = function (event, callback, onfinish, kwargs) {\r\n\r\n\tevent.target.dispatchEvent(new KeyboardEvent('keydown'));\r\n\r\n\tlet postOptions = callback(event);\t\t \t\t\t\t\t\t\t// multiActions[event.key](event);\r\n\r\n\tlet transfer = new DataTransfer();\t\t\t\t\t\t\t// так для IE не будет работать\r\n\ttransfer.setData('text/plain',\r\n\t\tevent.target.value.slice(\r\n\t\t\t(kwargs || event.target).selectionStart, \r\n\t\t\tevent.target.selectionEnd  // or line.slice(1)\r\n\t\t)\r\n\t);\r\n\tlet clipboardEvent = new ClipboardEvent('paste', { clipboardData: transfer })\r\n\r\n\tevent.target.dispatchEvent(clipboardEvent);\r\n\tevent.target.dispatchEvent(new InputEvent('input', {\t\t\t// так для IE не будет работать \r\n\t\tdata: null,\r\n\t\tinputType: 'insertFromPaste'\r\n\t}));\r\n\tif (onfinish && postOptions && postOptions.backoffset !== undefined) onfinish(postOptions);\r\n}\r\n/**\r\n * \r\n * @param {*} event \r\n * @param {Function} callback \r\n * @param {startLine: Number, endLine: Number} kwargs - позиция начала строки и конца строки \r\n */\r\nexport const storeAction = function (event, callback, kwargs) {\r\n\r\n\t// if (!kwargs) kwargs = {\r\n\t// \t// todo default behavior (now is draft!!)\r\n\t// \tstartLine: editor.value.lastIndexOf('\\n', editor.selectionStart-1),\r\n\t// \tendLine: Math.max(editor.value.indexOf('\\n', editor.selectionEnd), editor.value.length)\r\n\t// }\r\n\r\n\tevent.target.selectionStart = kwargs.startLine + 1;\r\n\tevent.target.selectionEnd = kwargs.endLine;\t\r\n\r\n\tevent.target.dispatchEvent(new KeyboardEvent('keydown', {}));\r\n\tlet preformat = callback(event);\r\n\r\n\tlet transfer = new DataTransfer(); \t\t\t\t\t// так для IE не будет работать\r\n\ttransfer.setData('text/plain', event.target.value.substr(kwargs.startLine + 1, preformat.line.length));\r\n\tlet clipboardEvent = new ClipboardEvent('paste', { clipboardData: transfer })\r\n\r\n\tevent.target.dispatchEvent(clipboardEvent);\r\n\tinput.caret = 123;\r\n\tevent.target.dispatchEvent(new InputEvent('input', {\t// так для IE не будет работать \r\n\t\tdata: null,\r\n\t\tinputType: 'insertFromPaste'\r\n\t}));\r\n\tinput.caret = undefined;\r\n\r\n\treturn preformat;\r\n}\r\n\r\n\r\nconst InputActionType =\r\n{\r\n\tinsertFromPaste: 'insertFromPaste',\t\t\t\t\t// get selection (keydown) and clipboardData (paste)\r\n\tdeleteByCut: 'deleteByCut',\t\t\t\t\t\t\t// get selection (keydown) \r\n\tinsertText: 'insertText',\t\t\t\t\t\t\t// get data (input) and selection (keydown)\r\n\tdeleteContentBackward: 'deleteContentBackward',\t\t// get selection (keydown)\r\n\tdeleteContentForward: 'deleteContentForward'\t\t// get selection (keydown)\r\n}\r\n\r\nlet storage = { undo: undoStorage, redo: redoStorage };\r\nconst redo = (e) => {\r\n\tlet redoState = redoStorage.pop();\r\n\tif (redoState) {\r\n\t\tundoStorage.push(redoState), debug && redoLog(storage);\r\n\r\n\t\tactionApply(redoState, 'redo');\r\n\t\tif (e.preventDefault) e.preventDefault();\r\n\t}\r\n\r\n}\r\nexport const undo = (e) => {\r\n\tif (e.shiftKey) return redo(e);\r\n\r\n\tlet undoState = undoStorage.pop();\r\n\tif (undoState) {\r\n\t\tredoStorage.push(undoState), debug && redoLog(storage);\r\n\r\n\t\tactionApply(undoState, '');\r\n\t\tif (e.preventDefault) e.preventDefault();\r\n\t\t\r\n\t}\r\n}","// @ts-nocheck\r\n\r\nimport { storeMultiactions, storeAction, undo } from \"undo-mimic/initialize\";\r\nimport main from 'undo-mimic/initialize';\r\n\r\n\r\nfunction initialize() {\r\n  \r\n  // initialize editor for undo/redo emulator applying in debug mode (true option):\r\n  var editor = main(document.querySelector('textarea'), true);\t\r\n  // on ctrl+z keydown event subscribe:\r\n  editor.onkeydown = (event) => { event.code === 'KeyZ' && event.ctrlKey && undo(event) };\r\n\r\n\r\n  document.querySelector('#add').onclick = (event) => {\t\t\t\t\t  // first example stored by undo-mimic action \r\n\r\n    let val = ' 123';    \r\n    editor.selectionStart = editor.selectionEnd = editor.value.length+1;    \r\n    storeAction({target: editor}, () => ({line: (() => { editor.value += val; return {line: val} })()}),{\r\n      startLine: editor.selectionStart-1,\r\n      endLine: editor.selectionEnd\r\n    });\r\n    editor.focus();\r\n  }\r\n\r\n  document.querySelector('#replace').onclick = (event) => {\t\t\t\t\t// second example stored by undo-mimic action \r\n\r\n    editor.selectionStart = 0, editor.selectionEnd = editor.value.length;\r\n    storeMultiactions({target: editor}, () => editor.value = '123 ', null, {selectionStart: 0});\r\n    editor.selectionStart = editor.selectionEnd = editor.value.length, editor.focus();\r\n  }  \r\n\r\n  return editor;\r\n\r\n}\r\n\r\nwindow.addEventListener('load', () => { const editor = initialize();\r\n\r\n  document.getElementById('undo_btn').onclick = () => {undo({shiftKey: false}); editor.focus();}\r\n  document.getElementById('redo_btn').onclick = () => { undo({shiftKey: true}); editor.focus();}\r\n});\r\n"],"names":[],"mappings":"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"}